OrganizaciÃ³n de archivos y guia de proyecto invervisa

Estructura de carpetas 

src/
â”‚
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ auth/               -> Login, registro, JWT
â”‚   â”œâ”€â”€ users/              -> CRUD y roles
â”‚   â”œâ”€â”€ products/           -> Medicamentos
â”‚   â”œâ”€â”€ categories/
â”‚   â”œâ”€â”€ orders/
â”‚   â”œâ”€â”€ order-items/
â”‚   â”œâ”€â”€ addresses/
â”‚   â”œâ”€â”€ cart/
â”‚
â”œâ”€â”€ common/                
â”‚   â”œâ”€â”€ guards/
â”‚   â”œâ”€â”€ interceptors/
â”‚   â”œâ”€â”€ decorators/
â”‚   â”œâ”€â”€ dtos/
â”‚   â””â”€â”€ utils/
â”‚
â”œâ”€â”€ config/                -> ConfiguraciÃ³n de DB, .env
â”‚   â”œâ”€â”€ typeorm.config.ts
â”‚
â”œâ”€â”€ database/             
â”‚   â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ seeds/
â”‚
â”œâ”€â”€ app.module.ts
â””â”€â”€ main.ts


1. Registro y Login
Frontend hace:

- POST /auth/register â†’ Enviar nombre, email, contraseÃ±a.
- POST /auth/login â†’ Enviar email, contraseÃ±a.

Backend responde:

- Registra usuario (con role: customer) y devuelve token JWT.
- Login devuelve token + perfil bÃ¡sico.

2. Ver productos y categorÃ­as
Frontend hace:

- GET /products â†’ Lista con paginaciÃ³n y bÃºsqueda.
- GET /products/:id â†’ Detalles de un medicamento.
- GET /categories â†’ Listado de categorÃ­as.

Backend responde:

- Productos filtrados (por nombre, categorÃ­a).
- Info detallada: nombre, descripciÃ³n, si requiere receta, stock, precio.

3. Carrito de Compras 
Frontend hace:

- GET /cart â†’ Ver productos en el carrito.
- POST /cart â†’ Agregar producto al carrito.
- PATCH /cart/:id â†’ Cambiar cantidad.
- DELETE /cart/:id â†’ Quitar producto.

Backend responde:

- Lista de productos en carrito.
- CÃ¡lculo del total en tiempo real.

4. Checkout y Ã“rdenes
Frontend hace:

- POST /orders â†’ Enviar cart, direcciÃ³n, mÃ©todo de pago.
- GET /orders â†’ Ver historial.
- GET /orders/:id â†’ Ver estado de orden.

Backend responde:

- Crea orden con items, descuenta stock, guarda total.
- Verifica si el producto necesita receta.
- Devuelve estado: pendiente, enviado, entregado, cancelado.

5. Perfil del Usuario
Frontend hace:

- GET /users/me â†’ Ver datos personales.
- PATCH /users/me â†’ Editar nombre, direcciÃ³n, etc.
- GET /addresses â†’ Lista de direcciones.
- POST /addresses â†’ Nueva direcciÃ³n.

6. Admin Panel 
Endpoints internos para admin:

- GET /admin/orders â†’ Todas las Ã³rdenes.
- PATCH /orders/:id â†’ Cambiar estado.
- POST /products â†’ Crear nuevo medicamento.
- PATCH /products/:id â†’ Editar.
- DELETE /products/:id â†’ Eliminar.

???


### ğŸ”¸ `POST /auth/register`

* DescripciÃ³n: Registrar un nuevo usuario
* Acceso: PÃºblico
* Body:

```json
{
  "name": "Juan PÃ©rez",
  "email": "juan@email.com",
  "password": "123456"
}
```
### ğŸ”¸ `POST /auth/login`

* DescripciÃ³n: Iniciar sesiÃ³n
* Acceso: PÃºblico
* Body:
```json
{
  "email": "juan@email.com",
  "password": "123456"
}
```

* Respuesta:
```json
{
  "access_token": "JWT_TOKEN",
  "user": {
    "id": "...",
    "name": "...",
    "email": "...",
    "role": "customer"
  }
}
```
## ğŸ‘¤ Usuarios
### ğŸ”¸ `GET /users/me`

* DescripciÃ³n: Obtener el perfil del usuario autenticado
* Acceso: Autenticado
* Headers:
  `Authorization: Bearer JWT_TOKEN`

## ğŸ“¦ Productos
### ğŸ”¸ `GET /products`

* DescripciÃ³n: Listar todos los productos
* Acceso: PÃºblico

### ğŸ”¸ `GET /products/:id`
* DescripciÃ³n: Ver detalle de un producto por ID
* Acceso: PÃºblico

### ğŸ”¸ `POST /products`
* DescripciÃ³n: Crear un nuevo producto
* Acceso: Solo `admin`
* Headers:
  `Authorization: Bearer JWT_TOKEN`
* Body:

```json
{
  "name": "AcetaminofÃ©n",
  "description": "AnalgÃ©sico",
  "price": 1200,
  "stock": 200,
  "categoryId": "uuid-de-la-categoria",
  "imageUrl": "https://..."
}
```

### ğŸ”¸ `PATCH /products/:id`
* DescripciÃ³n: Actualizar un producto
* Acceso: Solo `admin`

### ğŸ”¸ `DELETE /products/:id`
* DescripciÃ³n: Eliminar un producto
* Acceso: Solo `admin`

## ğŸ—‚ï¸ CategorÃ­as
### ğŸ”¸ `GET /categories`
* DescripciÃ³n: Listar todas las categorÃ­as
* Acceso: PÃºblico

### ğŸ”¸ `GET /categories/:id`

* DescripciÃ³n: Ver detalle de una categorÃ­a
* Acceso: PÃºblico

### ğŸ”¸ `POST /categories`
* DescripciÃ³n: Crear nueva categorÃ­a
* Acceso: Solo `admin`
* Body:

```json
{
  "name": "AnalgÃ©sicos",
  "description": "Productos para dolor"
}
```
### ğŸ”¸ `PATCH /categories/:id`
* DescripciÃ³n: Editar una categorÃ­a
* Acceso: Solo `admin`

### ğŸ”¸ `DELETE /categories/:id`
* DescripciÃ³n: Eliminar una categorÃ­a
* Acceso: Solo `admin`

## ğŸ“¥ Carrito

### ğŸ”¸ `GET /cart`
* DescripciÃ³n: Ver productos en el carrito del usuario
* Acceso: Autenticado

### ğŸ”¸ `POST /cart`
* DescripciÃ³n: Agregar producto al carrito
* Acceso: Autenticado
* Body:
```json
{
  "productId": "uuid-del-producto",
  "quantity": 2
}
```
### ğŸ”¸ `PATCH /cart/:id`
* DescripciÃ³n: Cambiar la cantidad de un producto en el carrito
* Acceso: Autenticado
* Body:
```json
{
  "quantity": 5
}
```
### ğŸ”¸ `DELETE /cart/:id`
* DescripciÃ³n: Quitar producto especÃ­fico del carrito
* Acceso: Autenticado

### ğŸ”¸ `DELETE /cart`
* DescripciÃ³n: Vaciar completamente el carrito
* Acceso: Autenticado

## ğŸšš Direcciones
### ğŸ”¸ `GET /addresses`
* DescripciÃ³n: Ver todas las direcciones del usuario
* Acceso: Autenticado

### ğŸ”¸ `POST /addresses`
* DescripciÃ³n: Crear nueva direcciÃ³n
* Acceso: Autenticado
* Body:

```json
{
  "street": "Calle 123",
  "city": "BogotÃ¡",
  "state": "Cundinamarca",
  "zipCode": "110111",
  "isDefault": true
}
```

### ğŸ”¸ `PATCH /addresses/:id`
* DescripciÃ³n: Editar una direcciÃ³n del usuario
* Acceso: Autenticado

### ğŸ”¸ `DELETE /addresses/:id`
* DescripciÃ³n: Eliminar direcciÃ³n del usuario
* Acceso: Autenticado

## ğŸ“‘ Ã“rdenes
### ğŸ”¸ `POST /orders/from-cart`
* DescripciÃ³n: Crear una orden desde el carrito
* Acceso: Autenticado
* Body:
```json
{
  "addressId": "uuid-de-la-direccion"
}
```
### ğŸ”¸ `GET /orders/my`
* DescripciÃ³n: Ver las Ã³rdenes del usuario actual
* Acceso: Autenticado

### ğŸ”¸ `GET /orders`
* DescripciÃ³n: Ver todas las Ã³rdenes (admin)
* Acceso: Solo `admin`

### ğŸ”¸ `PATCH /orders/:id/status`
* DescripciÃ³n: Cambiar estado de la orden (`pending`, `paid`, `shipped`, etc.)
* Acceso: Solo `admin`
* Body:

```json
{
  "status": "shipped"
}
```

## ğŸ” AutenticaciÃ³n y Seguridad
* Para todas las rutas protegidas, debes enviar el token en el header:

```
Authorization: Bearer JWT_TOKEN
```
